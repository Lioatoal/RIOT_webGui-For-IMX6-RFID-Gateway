<!DOCTYPE html>
<html>

<head>
    <% include ../partials/head.html %>
    <style media="screen">
        @media screen and (min-width: 992px) {
            .topDiv{
                padding-top:160px;
            }
            .rfidTagDiv, .gpsNaviDiv, .outputDiv{
                height: 470px;
            }
            .outputTimerDiv{
                padding-top:100px;
            }
        }
        @media screen and (max-width: 992px) {
            .topDiv{
                padding-top:70px;
            }
        }

    </style>
</head>

<body>
    <div id="container">

        <div id="header">
            <% include ../partials/header.html %>
        </div>
    </div>

    <div class="topDiv">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="text-center"><strong data-i18n="invLogging.rfidTag"></strong></h3></div>
                    </div>
                    <div class="row rfidTagDiv" style="background-color:#f1f1f1;">
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidEPC" type="checkbox">
                                    <span data-i18n="invLogging.epc"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidFastTID" type="checkbox">
                                    <span data-i18n="invLogging.fastTID"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidPhyAnt" type="checkbox">
                                    <span data-i18n="invLogging.phyAntenna"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidLogAnt" type="checkbox" data-i18n="invLogging.logicAntenna">
                                    <span data-i18n="invLogging.logicAntenna"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidRSSI" type="checkbox">
                                    <span data-i18n="invLogging.rssi"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidPhase" type="checkbox" disabled>
                                    <span data-i18n="invLogging.phase"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidFreq" type="checkbox" disabled>
                                    <span data-i18n="invLogging.frequency"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidTemperature" type="checkbox">
                                    <span data-i18n="invLogging.hpsipTemperature"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="rfidDateTime" type="checkbox">
                                    <span data-i18n="invLogging.dateTime"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="text-center"><strong data-i18n="invLogging.gpsNavigation"></strong></h3></div>
                    </div>
                    <div class="row gpsNaviDiv" style="background-color:#f1f1f1;">
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsLatiLongi" type="checkbox">
                                    <span data-i18n="invLogging.latiAndLongi"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsAlti" type="checkbox">
                                    <span data-i18n="invLogging.altitude"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsTime" type="checkbox">
                                    <span data-i18n="invLogging.gpsTime"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsSpeed" type="checkbox">
                                    <span data-i18n="invLogging.speed"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsHeading" type="checkbox">
                                    <span data-i18n="invLogging.heading"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-12">
                            <h3><strong data-i18n="invLogging.gpsHealth"></strong></h3></div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsSatellites" type="checkbox">
                                    <span data-i18n="invLogging.satellites"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsFix" type="checkbox">
                                    <span data-i18n="invLogging.fix"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="gpsHDOP" type="checkbox">
                                    <span data-i18n="invLogging.hdop"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-12">
                            <div class="row">
                                <div class="col-md-12 col-sm-5">
                                    <label data-i18n="invLogging.gpsSleepTime"></label>
                                </div>
                                <div class="col-md-6 col-sm-3 col-xs-6">
                                    <input id="gpsThreadSleepTimer" type="text" style="margin-bottom:6px;width:100%" size="15">
                                </div>
                                <div class="col-md-6 col-sm-4">
                                    <label data-i18n="invLogging.seconds"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="text-center"><strong data-i18n="invLogging.output"></strong> </h3></div>
                    </div>
                    <div class="row outputDiv" style="background-color:#f1f1f1;">
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsLocalWebGUI" type="checkbox">
                                    <span data-i18n="invLogging.localWebGui">
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsAWSGreengrass" type="checkbox">
                                    <span data-i18n="invLogging.awsGreengrass"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsAWSIOTMQTT" type="checkbox">
                                    <span data-i18n="invLogging.mqtt"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsBluetooth" type="checkbox">
                                    <span  data-i18n="invLogging.bluetoothEPC"></span>
                                </label>
                            </div>
                        </div>
						<!-- Add by Roy for add BT TID field, 2018-12-25.-->
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsBluetoothTID" type="checkbox">
                                    <span data-i18n="invLogging.bluetoothTID"></span>
                                </label>
                            </div>
                        </div>
						<!-- End by Roy for add BT TID field, 2018-12-25.-->
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsTCPUDPHost" type="checkbox">
                                    <span data-i18n="invLogging.tcpUdpHost"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsHTTPPost" type="checkbox">
                                    <span data-i18n="invLogging.httpPost"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
						<!-- Mod by Tom for merge the version of RIOT_20180730, 2018-08-16. -->
                                    <input id="outputsSDCard" type="checkbox">
                                    <span data-i18n="invLogging.sdCard"></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="outputsDebug" type="checkbox">
                                    <span data-i18n="invLogging.sshDebug"></span>
                                </label>
									<!-- <input id="outputsSSHScreen" type="checkbox">SSH Debug</label> -->
						<!-- End by Tom for merge the version of RIOT_20180730, 2018-08-16. -->
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-12">
							<div class="row">
                                <div class="col-md-12 col-sm-5">
                                    <label data-i18n="invLogging.outputSleepTime"></label>
                                </div>
                                <div class="col-md-6 col-sm-3 ">
                                    <input id="outputsThreadSleepTimer" type="text" style="margin-bottom:6px;width:100%" size="15">
                                </div>
                                <div class="col-md-6 col-sm-4">
                                    <label data-i18n="invLogging.seconds"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-offset-5 col-md-2 col-sm-offset-4 col-sm-4" style="padding-top:10px" >
                    <button id="set" class="btn btn-default" type="button" style="width:100%;font-size:18px;"><strong data-i18n="invLogging.submit"></strong> </button>
                </div>
            </div>
        </div>
    </div>
    <hr class="no-grid-gutter-h grid-gutter-margin-b">
    <div id="footer">
        <% include ../partials/footer.html %>
        <!-- <footer>
        <p class="footer section infoline_center">Copyright © 2017-2018 MTI, Inc. All Rights Reserved&nbsp;&nbsp;&nbsp;</p>
        </footer> -->
    </div>

    <script type="text/javascript">
        var dbloggingData =  <%- JSON.stringify(inventorylogging) %>;
        var postData;
        getData(dbloggingData);

        $("#outputsBluetooth").on('change',function () {
            if(this.checked){
                $("#outputsBluetoothTID").prop("checked", false);
            }
        });
        $("#outputsBluetoothTID").on('change',function () {
            if(this.checked){
                $("#outputsBluetooth").prop("checked", false);
            }
        });

        $("#set").click(function () {
            var loggingSet = [];
            loggingSet = {
              //RFID Tag
              RFIDEPC: $("#rfidEPC").prop('checked'),
              RFIDFastTID: $("#rfidFastTID").prop('checked'),
              RFIDPhyAnt: $("#rfidPhyAnt").prop('checked'),
              RFIDLogAnt: $("#rfidLogAnt").prop('checked'),
              RFIDRSSI: $("#rfidRSSI").prop('checked'),
			  //Mod by Tom for merge the version of RIOT_20180730, 2018-08-16.
              // RFIDPhase: $("#rfidPhase").prop('checked'),
              // RFIDFreq: $("#rfidFreq").prop('checked'),
              RFIDTemperature: $("#rfidTemperature").prop('checked'),
              RFIDDateTime: $("#rfidDateTime").prop('checked'),

              //GPS Navigation
              GPSLatiLongi: $("#gpsLatiLongi").prop('checked'),
              GPSAlti: $("#gpsAlti").prop('checked'),
              GPSTime: $("#gpsTime").prop('checked'),
              GPSSpeed: $("#gpsSpeed").prop('checked'),
              GPSHeading: $("#gpsHeading").prop('checked'),

              //GPS Health
              GPSSatellites: $("#gpsSatellites").prop('checked'),
              GPSFix: $("#gpsFix").prop('checked'),
              GPSHDOP: $("#gpsHDOP").prop('checked'),
              GPSThreadSleepTimer: $("#gpsThreadSleepTimer").val(),

              //Outputs
              OUTPUTSLocalWebGUI: $("#outputsLocalWebGUI").prop('checked'),
              OUTPUTSAWSGreengrass: $("#outputsAWSGreengrass").prop('checked'),
              OUTPUTSAWSIOTMQTT: $("#outputsAWSIOTMQTT").prop('checked'),
              OUTPUTSBluetooth: $("#outputsBluetooth").prop('checked'),
              OUTPUTSBluetoothTID: $("#outputsBluetoothTID").prop('checked'), //Add by Roy for add BT TID field, 2018-12-25.
              OutputsTCPUDPHost: $("#outputsTCPUDPHost").prop('checked'),
              OUTPUTSHTTPPost: $("#outputsHTTPPost").prop('checked'),
              OUTPUTSSDCard: $("#outputsSDCard").prop('checked'),
			  OUTPUTSDEBUGMsg: $("#outputsDebug").prop('checked'),
              OUTPUTSThreadSleepTimer: $("#outputsThreadSleepTimer").val(),
            }
            $.post('/inventorylogging', {loggingSet:JSON.stringify(loggingSet)}, function(result) {
                location.reload();
            });
        });

        function getData(loggingData) {
		//Mod by Roy for show error log if get method return error, 2018-03-28.
            if (getCheckForm()) {
                return;
            }
            //RFID Tag
            (loggingData[0].RFID_Log_EPC == true) ? $("#rfidEPC")[0].checked = true : $("#rfidEPC")[0].checked = false;
            (loggingData[0].RFID_Log_FastTID == true) ? $("#rfidFastTID")[0].checked = true : $("#rfidFastTID")[0].checked = false;
            (loggingData[0].RFID_Log_PhysAnt == true) ? $("#rfidPhyAnt")[0].checked = true : $("#rfidPhyAnt")[0].checked = false;
            (loggingData[0].RFID_Log_LogAnt == true) ? $("#rfidLogAnt")[0].checked = true : $("#rfidLogAnt")[0].checked = false;
            (loggingData[0].RFID_Log_RSSI == true) ? $("#rfidRSSI")[0].checked = true : $("#rfidRSSI")[0].checked = false;
            // (loggingData[0].RFID_Log_Phase == true) ? $("#rfidPhase")[0].checked = true : $("#rfidPhase")[0].checked = false;
            // (loggingData[0].RFID_Log_Freq == true) ? $("#rfidFreq")[0].checked = true : $("#rfidFreq")[0].checked = false;
            (loggingData[0].RFID_Log_Temp == true) ? $("#rfidTemperature")[0].checked = true : $("#rfidTemperature")[0].checked = false;
            (loggingData[0].RIOT_Log_SystemTime == true) ? $("#rfidDateTime")[0].checked = true : $("#rfidDateTime")[0].checked = false;

            //GPS Navigation
            (loggingData[0].GPS_Log_LatLong == true) ? $("#gpsLatiLongi")[0].checked = true : $("#gpsLatiLongi")[0].checked = false;
            (loggingData[0].GPS_Log_Altitude == true) ? $("#gpsAlti")[0].checked = true : $("#gpsAlti")[0].checked = false;
            (loggingData[0].GPS_Log_Time == true) ? $("#gpsTime")[0].checked = true : $("#gpsTime")[0].checked = false;
            (loggingData[0].GPS_Log_Speed == true) ? $("#gpsSpeed")[0].checked = true : $("#gpsSpeed")[0].checked = false;
            (loggingData[0].GPS_Log_Heading == true) ? $("#gpsHeading")[0].checked = true : $("#gpsHeading")[0].checked = false;

            //GPS Health
            (loggingData[0].GPS_Log_Sats == true) ? $("#gpsSatellites")[0].checked = true : $("#gpsSatellites")[0].checked = false;
            (loggingData[0].GPS_Log_Fix == true) ? $("#gpsFix")[0].checked = true : $("#gpsFix")[0].checked = false;
            (loggingData[0].GPS_Log_Hdop == true) ? $("#gpsHDOP")[0].checked = true : $("#gpsHDOP")[0].checked = false;
            $("#gpsThreadSleepTimer").val(loggingData[0].TIMER_GPS);

            //Outputs
            (loggingData[0].OUTPUT_Webservice == true) ? $("#outputsLocalWebGUI")[0].checked = true : $("#outputsLocalWebGUI")[0].checked = false;
            (loggingData[0].OUTPUT_AWS_Greengrass == true) ? $("#outputsAWSGreengrass")[0].checked = true : $("#outputsAWSGreengrass")[0].checked = false;
            (loggingData[0].OUTPUT_AWS_MQTT == true) ? $("#outputsAWSIOTMQTT")[0].checked = true : $("#outputsAWSIOTMQTT")[0].checked = false;
            if(loggingData[0].OUTPUT_Bluetooth == true){
                $("#outputsBluetooth")[0].checked = true;
                $("#outputsBluetoothTID").prop("checked", false);
            }
            if(loggingData[0].OUTPUT_BT_TID == true){
                $("#outputsBluetoothTID")[0].checked = true;
                $("#outputsBluetooth").prop("checked", false);
            }
            //Add by Roy for add BT TID field, 2018-12-25.
            (loggingData[0].OUTPUT_TCP_UDP == true) ? $("#outputsTCPUDPHost")[0].checked = true : $("#outputsTCPUDPHost")[0].checked = false;
            (loggingData[0].OUTPUT_HTTP_POST == true) ? $("#outputsHTTPPost")[0].checked = true : $("#outputsHTTPPost")[0].checked = false;
            (loggingData[0].RIOT_Write2Sdcard == true) ? $("#outputsSDCard")[0].checked = true : $("#outputsSDCard")[0].checked = false;
			(loggingData[0].OUTPUT_DebugMsg == true) ? $("#outputsDebug")[0].checked = true : $("#outputsDebug")[0].checked = false;
            //End by Tom for merge the version of RIOT_20180730, 2018-08-16.
			$("#outputsThreadSleepTimer").val(loggingData[0].TIMER_Output);
         }
        function getCheckForm() {
            if (dbloggingData.length == 0) {
                alert('get logging failed!');
                return true;
            }
            return false;
        }
		//End by Roy for show error log if get method return error, 2018-03-28.


	</script>
</body>
</html>
